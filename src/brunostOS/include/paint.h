#ifndef WAVE_H
#define WAVE_H

#include "io.h"
#include "libc/stdint.h"

#define PIXEL_COUNT (VGA_HEIGHT-2)*VGA_WIDTH*2 // Not actually pixels
#define STORAGE_SPACE PIXEL_COUNT + sizeof(struct save_header) + 555 // Required space for storage

struct save_header{
    uint16_t magic;
    unsigned char filename[21];
};

static const uint16_t magic = 0b1010101010101010;

void paint(char[], char[]);
void print_menu();

void savemenu_clear(int);
void save_painting(char[], char[]);
void load_painting(char[], char[]);

 // Example/test use. Can use own array for storage
static char painting1[] = { // HelloWorld
    170,170,72,101,108,108,111,87,111,114,100,8,108,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,82,79,71,47,66,31,67,63,77,95,89,143,75,15,32,112,32,112,81,240,58,240,98,240,97,240,115,240,105,240,99,240,32,240,109,240,111,240,100,240,101,240,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,115,240,116,240,111,240,114,240,97,240,103,240,101,240,65,240,58,240,32,240,32,240,32,240,32,240,32,240,32,240,32,240,32,240,32,240,32,240,32,240,32,240,32,240,32,240,32,240,32,240,32,240,32,240,32,127,32,127,114,207,103,175,98,159,99,191,109,223,121,127,87,240,32,112,32,112,115,248,101,248,108,248,101,248,99,248,116,248,101,248,100,248,32,248,99,248,111,248,108,248,111,248,114,248,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,115,240,116,240,111,240,114,240,97,240,103,240,101,240,66,240,58,240,101,240,109,240,112,240,116,240,121,240,32,240,115,240,116,240,111,240,114,240,97,240,103,240,101,240,32,240,32,240,32,240,32,240,32,240,32,127,32,127,32,207,32,175,32,159,32,191,32,223,32,127,32,248,0,15,32,127,32,95,32,63,32,31,32,47,32,79,0,15,0,15,0,15,0,15,0,15,32,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,32,207,32,175,32,159,32,191,32,223,32,127,32,248,0,15,32,127,32,95,32,63,32,31,32,47,32,79,0,15,32,248,32,15,0,15,32,248,32,15,32,248,32,248,32,248,32,15,32,248,0,15,32,15,0,15,32,248,0,15,0,15,0,15,0,15,32,248,32,248,0,15,0,15,0,15,0,15,0,15,32,248,0,15,0,15,32,15,32,248,0,15,32,15,32,248,32,248,0,15,0,15,32,248,32,248,32,248,0,15,0,15,32,248,0,15,0,15,0,15,32,248,32,248,32,248,32,15,0,15,32,248,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,32,207,32,175,32,159,32,191,32,223,32,127,32,248,0,15,32,127,32,95,32,63,32,31,32,47,32,79,0,15,32,248,32,15,0,15,32,248,32,15,32,248,32,15,32,15,32,15,32,248,0,15,32,15,0,15,32,248,0,15,0,15,0,15,32,248,0,15,0,15,32,248,0,15,0,15,0,15,0,15,32,248,0,15,32,248,32,15,32,248,0,15,32,248,0,15,0,15,32,248,0,15,32,248,0,15,0,15,32,248,0,15,32,248,0,15,0,15,0,15,32,248,0,15,32,15,32,248,0,15,32,248,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,32,207,32,175,32,159,32,191,32,223,32,127,32,248,0,15,32,127,32,95,32,63,32,31,32,47,32,79,0,15,32,248,32,248,32,248,32,248,32,15,32,248,32,248,32,248,32,15,32,248,0,15,32,15,0,15,32,248,0,15,0,15,0,15,32,248,0,15,0,15,32,248,0,15,0,15,0,15,0,15,32,248,0,15,32,248,32,15,32,248,0,15,32,248,0,15,0,15,32,248,0,15,32,248,0,15,0,15,32,248,0,15,32,248,0,15,0,15,0,15,32,248,0,15,32,15,32,248,32,15,32,248,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,32,207,32,175,32,159,32,191,32,223,32,127,32,248,0,15,32,127,32,95,32,63,32,31,32,47,32,79,0,15,32,248,32,15,0,15,32,248,32,15,32,248,32,15,32,15,32,15,32,248,0,15,32,15,0,15,32,248,0,15,0,15,0,15,32,248,0,15,0,15,32,248,0,15,0,15,0,15,0,15,32,248,0,15,32,248,32,15,32,248,0,15,32,248,0,15,0,15,32,248,0,15,32,248,32,248,32,248,0,15,0,15,32,248,0,15,0,15,0,15,32,248,0,15,0,15,32,248,32,15,32,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,32,207,32,175,32,159,32,191,32,223,32,127,32,248,0,15,32,127,32,95,32,63,32,31,32,47,32,79,0,15,32,248,32,15,0,15,32,248,32,15,32,248,32,248,32,248,32,15,32,248,32,248,32,248,32,15,32,248,32,248,32,248,0,15,0,15,32,248,32,248,0,15,0,15,32,248,0,15,0,15,0,15,32,248,32,15,32,248,32,15,32,15,32,15,32,248,32,248,0,15,0,15,32,248,0,15,0,15,32,248,0,15,32,248,32,248,32,248,0,15,32,248,32,248,32,248,0,15,0,15,32,248,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,32,207,32,175,32,159,32,191,32,223,32,127,32,248,0,15,32,127,32,95,32,63,32,31,32,47,32,79,0,15,0,15,0,15,0,15,0,15,0,15,0,15,32,15,32,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,32,207,32,175,32,159,32,191,32,223,32,127,32,248,0,15,32,127,32,95,32,63,32,31,32,47,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,79,32,207,32,175,32,159,32,191,32,223,32,127,32,248,0,15,32,127,32,95,32,63,32,31,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,47,32,207,32,175,32,159,32,191,32,223,32,127,32,248,0,15,32,127,32,95,32,63,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,31,32,207,32,175,32,159,32,191,32,223,32,127,32,248,0,15,32,127,32,95,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,63,32,207,32,175,32,159,32,191,32,223,32,127,32,248,0,15,32,127,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,95,32,207,32,175,32,159,32,191,32,223,32,127,32,248,0,15,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,207,32,175,32,159,32,191,32,223,32,127,32,248,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,0,15,32,207,32,175,32,159,32,191,32,223,32,127,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,248,32,207,32,175,32,159,32,191,32,223,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,
    32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,127,32,207,32,175,32,159,32,191,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,223,32,207,32,175,32,159,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,191,32,207,32,175,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,159,32,207,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,175,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,32,207,160,117,16
};
static char painting2[STORAGE_SPACE]; // empty storage

#endif // WAVE_H