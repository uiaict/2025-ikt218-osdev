#ifndef SONG_H
#define SONG_H

#include "frequencies.h"
#include "libc/system.h"

// Define a struct to represent a single musical note
typedef struct {
    uint32_t frequency; // The frequency of the note in Hz (e.g., A4 = 440 Hz)
    uint32_t duration;  // The duration of the note in milliseconds
} Note;

// Define a struct to represent a song
typedef struct {
    Note* notes;        // Pointer to an array of Note structs representing the song
    uint32_t length;    // The number of notes in the song
} Song;

// Define a struct to represent a song player
typedef struct {
    void (*play_song)(Song* song); // Function pointer to a function that plays a song
} SongPlayer;

// Function prototype for creating a new SongPlayer instance
// Returns a pointer to a newly created SongPlayer object
SongPlayer* create_song_player();
void play_song_impl(Song *song) ;

// Castlevania - Vampire Killer theme
static Note castlevania_theme[] = {
    {C5, 130}, {D5, 130}, {F5, 130}, {G5, 130},
    {A5, 260}, {G5, 130}, {F5, 130}, {E5, 130}, {F5, 130},
    {D5, 260}, {F5, 130}, {G5, 130}, {A5, 130}, {C6, 260},

    {A5, 130}, {G5, 130}, {F5, 130}, {G5, 130},
    {E5, 260}, {F5, 130}, {E5, 130}, {D5, 130}, {C5, 390},
    
    {R, 130},
    
    {C5, 130}, {D5, 130}, {F5, 130}, {G5, 130},
    {A5, 260}, {G5, 130}, {F5, 130}, {E5, 130}, {F5, 130},
    {D5, 260}, {F5, 130}, {G5, 130}, {A5, 130}, {C6, 260},
    
    {A5, 130}, {G5, 130}, {F5, 130}, {G5, 130},
    {E5, 260}, {F5, 130}, {E5, 130}, {D5, 130}, {C5, 390},
    
    {F5, 130}, {G5, 130}, {A5, 260}, {G5, 130}, {F5, 260}, {C5, 390},
    {R, 260}
};

// Super Mario Bros theme
static Note mario_theme[] = {
    {E5, 120}, {R, 40}, {E5, 120}, {R, 80}, {E5, 120}, {R, 80},
    {C5, 120}, {E5, 120}, {G5, 240}, {R, 240}, {G4, 240}, {R, 240},
    
    {C5, 240}, {R, 120}, {G4, 240}, {R, 120}, {E4, 240}, {R, 120},
    {A4, 120}, {B4, 120}, {R, 60}, {As4, 120}, {A4, 240}, {R, 60},
    
    {G4, 120}, {E5, 120}, {G5, 120}, {A5, 240}, {F5, 120}, {G5, 120},
    {R, 60}, {E5, 120}, {C5, 120}, {D5, 120}, {B4, 240}, {R, 120},
    
    {C5, 240}, {R, 120}, {G4, 240}, {R, 120}, {E4, 240}, {R, 120},
    {A4, 120}, {B4, 120}, {R, 60}, {As4, 120}, {A4, 240}, {R, 60},
    
    {G4, 120}, {E5, 120}, {G5, 120}, {A5, 240}, {F5, 120}, {G5, 120},
    {R, 60}, {E5, 120}, {C5, 120}, {D5, 120}, {B4, 240}, {R, 240}
};

// Battlefield 1942 theme - improved timing
static Note battlefield_1942_theme[] = {
    // Main theme
    {E4, 400}, {G4, 400}, {B4, 250}, {E5, 200},
    {D5, 200}, {B4, 250}, {G4, 400}, {B4, 250},
    {E5, 200}, {D5, 200}, {B4, 250}, {G4, 400},
    {B4, 250}, {E5, 200}, {G5, 200}, {E5, 250},
    
    {D5, 200}, {B4, 250}, {G4, 400}, {E4, 400},
    {G4, 400}, {B4, 250}, {E5, 200}, {D5, 200},
    {B4, 250}, {G4, 400}, {B4, 250}, {E5, 200},
    {D5, 200}, {B4, 250}, {G4, 400}, {B4, 250},
    {E5, 200}, {G5, 200}, {E5, 250}, {D5, 200},
    {B4, 250}, {G4, 400},
    
    {E4, 250}, {R, 150}, {E4, 300}, {R, 400}
};

// Zelda - Main Theme
static Note zelda_theme[] = {
    {A4, 240}, {R, 60}, {A4, 120}, {R, 30}, {A4, 120}, {R, 30},
    {A4, 180}, {F4, 60}, {A4, 240}, {R, 120},
    
    {A4, 180}, {A4, 60}, {A4, 240}, {G4, 200}, {F4, 80}, 
    {G4, 160}, {A4, 160}, {D5, 480}, {R, 160},
    
    {A4, 180}, {A4, 60}, {A4, 240}, {G4, 200}, {F4, 80},
    {G4, 160}, {E4, 160}, {D4, 480}, {R, 160},
    
    {F4, 180}, {F4, 60}, {F4, 240}, {E4, 200}, {D4, 80},
    {E4, 160}, {F4, 160}, {A4, 480}, {R, 160},
    
    {D5, 180}, {D5, 60}, {D5, 160}, {A4, 320}, {R, 160},
    {F4, 160}, {G4, 160}, {A4, 320}, {R, 160},
    {D4, 480}, {R, 320}
};

// Tetris Theme
static Note tetris_theme[] = {
  {E5,  100}, {B4, 100}, {C5, 100}, {D5, 100},
  {C5, 100}, {B4, 100}, {A4, 200}, {A4, 100},
  {C5, 100}, {E5, 200}, {D5, 100}, {C5, 100},
  {B4, 400}, 
  {C5, 100}, {D5, 200}, {E5, 200},

  {C5, 200}, {A4, 200}, {A4, 400}, {R, 100},

  {D5, 200}, {F5, 100}, {A5, 200}, {G5, 100}, {F5, 100},
  {E5, 400}, {C5, 100}, {E5, 200}, {D5, 100}, {C5, 100},
  {B4, 200}, {B4, 100}, {C5, 100}, {D5, 200}, {E5, 200},
  {C5, 200}, {A4, 200}, {A4, 200}, {R, 100},

  {E4, 100}, {C5, 100}, {D5, 100}, {B4, 100},
  {C5, 100}, {A4, 100}, {Gs4,100}, {B4, 400},
  {E4, 100}, {C5, 100}, {D5, 100}, {B4, 100},
  {C5, 100}, {E5, 100}, {E5, 100}, {E5, 400},

  {C5, 200}, {D5, 200}, {E5, 200}, {C5, 200},
  {D5, 200}, {B4, 200}, {C5, 200}, {A4, 400},
  {R, 200},
  {E5, 200}, {C5, 200}, {A4, 600},
  {R, 400}
};


// Super Mario Bros. underworld theme
static Note mario_underworld[] = {
    {C3, 120}, {R, 30}, {C4, 120}, {R, 30}, {C3, 120}, {R, 30}, {C4, 120}, {R, 30},
    {C3, 120}, {R, 30}, {C4, 120}, {R, 30}, {E3, 120}, {R, 30}, {F4, 120}, {R, 30},
    {G3, 120}, {R, 30}, {A4, 120}, {R, 30}, {B3, 120}, {R, 30}, {C4, 120}, {R, 150},
    
    {C3, 120}, {R, 30}, {C4, 120}, {R, 30}, {C3, 120}, {R, 30}, {C4, 120}, {R, 30},
    {C3, 120}, {R, 30}, {C4, 120}, {R, 30}, {E3, 120}, {R, 30}, {F4, 120}, {R, 30},
    {G3, 120}, {R, 30}, {A4, 120}, {R, 30}, {B3, 120}, {R, 30}, {C4, 120}, {R, 150},
    
    {C4, 100}, {B3, 100}, {As3, 100}, {A3, 100},
    {G3, 90}, {Fs3, 90}, {F3, 90}, {E3, 90}, {Ds3, 90},
    {D3, 120}, {Cs3, 120}, {C3, 300}, {R, 100}, {C3, 100}, {R, 300}
};

// Creepy Nuts inspired hip-hop melody
static Note hiphop_melody[] = {
    {D4, 150}, {F4, 150}, {A4, 300}, {R, 30}, {G4, 120}, {A4, 150},
    {F4, 300}, {D4, 150}, {F4, 150}, {G4, 150}, {A4, 150},
    {C5, 300}, {A4, 150}, {G4, 250}, {R, 100},
   
    {D4, 80}, {D4, 80}, {D4, 80}, {R, 30}, {F4, 170}, {D4, 100}, {F4, 170},
    {G4, 100}, {A4, 250}, {R, 50}, {G4, 150}, {F4, 150}, {D4, 250},
    {F4, 80}, {F4, 80}, {F4, 80}, {R, 30}, {G4, 170}, {F4, 100}, {G4, 170},
    {A4, 100}, {C5, 250}, {R, 50}, {A4, 150}, {G4, 250}, {R, 100},
   
    {D5, 150}, {C5, 150}, {A4, 250}, {R, 50}, {G4, 150}, {A4, 150},
    {G4, 150}, {F4, 250}, {R, 50}, {D4, 150}, {F4, 150}, {G4, 150},
    {A4, 150}, {G4, 150}, {F4, 250}, {R, 50}, {D4, 150}, {F4, 150},
    {G4, 150}, {A4, 250}, {R, 50}, {G4, 150}, {F4, 250}, {R, 50},
   
    {D4, 60}, {D4, 60}, {F4, 120}, {R, 30}, {D4, 60}, {D4, 60}, {F4, 120}, {R, 30},
    {G4, 150}, {A4, 150}, {C5, 150}, {A4, 150}, {G4, 250}, {R, 50},
    {F4, 60}, {F4, 60}, {G4, 120}, {R, 30}, {F4, 60}, {F4, 60}, {G4, 120}, {R, 30},
    {A4, 150}, {C5, 150}, {D5, 150}, {C5, 150}, {A4, 250}, {R, 50},
   
    {D5, 150}, {C5, 150}, {A4, 250}, {R, 50}, {G4, 150}, {A4, 150},
    {F4, 250}, {R, 50}, {D4, 150}, {F4, 150}, {G4, 150}, {A4, 150},
    {G4, 250}, {R, 50}, {F4, 150}, {D4, 300}, {R, 70}, {D4, 80}, {R, 300}
};

// Star Wars Theme
static Note starwars_theme[] = {
    {A4, 500}, {A4, 500}, {A4, 500},
    {F4, 375}, {C5, 125},
    {A4, 500}, {F4, 375}, {C5, 125}, {A4, 1000},
    {E5, 500}, {E5, 500}, {E5, 500},
    {F5, 375}, {C5, 125},
   
    {G4, 500}, {F4, 375}, {C5, 125}, {A4, 1000},
    {A5, 500}, {A4, 375}, {A4, 125},
    {A5, 500}, {G5, 375}, {F5, 125}, {E5, 125}, {D5, 125},
    {C5, 250},{R, 200}, {B4, 250},{R, 200}, {A4, 500},

    {R, 500}
};

// "Take On Me" by A-ha
static Note take_on_me[] = {
    {A4, 180}, {E5, 180}, {A5, 180}, {R, 60}, {A5, 180}, {A5, 180}, {Gs5, 180}, {A5, 180},
    {R, 60}, {E5, 180}, {R, 60}, {E5, 180}, {R, 60}, {E5, 180}, {R, 60}, {E5, 180},
    
    {A4, 180}, {E5, 180}, {A5, 180}, {R, 60}, {A5, 180}, {A5, 180}, {Gs5, 180}, {A5, 180},
    {R, 60}, {E5, 180}, {R, 60}, {E5, 180}, {R, 60}, {E5, 180}, {R, 60}, {E5, 180},
    
    {A4, 180}, {E5, 180}, {A5, 180}, {R, 60}, {A5, 180}, {A5, 180}, {Gs5, 180}, {A5, 180},
    {R, 60}, {E5, 180}, {R, 60}, {E5, 180}, {R, 60}, {E5, 180}, {R, 60}, {E5, 270}, {R, 90}
};

// "Ode to Joy" Beethoven's 9th Symphony
static Note ode_to_joy[] = {
    {E4, 180}, {E4, 180}, {F4, 180}, {G4, 180}, {G4, 180}, {F4, 180}, {E4, 180}, {D4, 180},
    {C4, 180}, {C4, 180}, {D4, 180}, {E4, 180}, {E4, 360}, {D4, 90}, {D4, 270},
    
    {E4, 180}, {E4, 180}, {F4, 180}, {G4, 180}, {G4, 180}, {F4, 180}, {E4, 180}, {D4, 180},
    {C4, 180}, {C4, 180}, {D4, 180}, {E4, 180}, {D4, 270}, {C4, 90}, {C4, 360}, {R, 90},
    
    {D4, 180}, {D4, 180}, {E4, 180}, {C4, 180}, {D4, 180}, {E4, 90}, {F4, 90}, {E4, 180}, {C4, 180},
    {D4, 180}, {E4, 90}, {F4, 90}, {E4, 180}, {D4, 180}, {C4, 180}, {D4, 180}, {G3, 360}, {R, 90}
};

// "Twinkle Twinkle Little Star"
static Note twinkle_twinkle[] = {
    {C4, 450}, {R, 50}, {C4, 450}, {R, 50}, {G4, 450}, {R, 50}, {G4, 450}, {R, 50},
    {A4, 450}, {R, 50}, {A4, 450}, {R, 50}, {G4, 900}, {R, 100},
    
    {F4, 450}, {R, 50}, {F4, 450}, {R, 50}, {E4, 450}, {R, 50}, {E4, 450}, {R, 50},
    {D4, 450}, {R, 50}, {D4, 450}, {R, 50}, {C4, 900}, {R, 100},
    
    {G4, 225}, {R, 25}, {G4, 225}, {R, 25}, {F4, 225}, {R, 25}, {F4, 225}, {R, 25}, 
    {E4, 450}, {R, 50}, {C4, 450}, {R, 50},
    
    {G4, 225}, {R, 25}, {G4, 225}, {R, 25}, {F4, 225}, {R, 25}, {F4, 225}, {R, 25}, 
    {E4, 450}, {R, 50}, {C4, 450}, {R, 50},
    
    {C4, 450}, {R, 50}, {G3, 450}, {R, 50}, {C4, 900}, {R, 100}
};

#endif
